{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";axios.get('https://backend-pesticide.onrender.com/api/products');function App(){const[produse,setProduse]=useState([]);const[filters,setFilters]=useState({denumire:'',substanta:'',categorie:'',cultura:'',daunator:''});const[error,setError]=useState(null);useEffect(()=>{axios.get('https://backend-pesticide.onrender.com/api/products').then(res=>setProduse(res.data)).catch(err=>setError('Eroare la interogare'));},[]);const formatDoze=text=>{const values=text===null||text===void 0?void 0:text.split('|')// Împărțim doar după |\n.map(item=>item.trim().replace(',','.'))// Înlocuim virgula cu punct\n.filter(Boolean);const unique=Array.from(new Set(values));return unique.map((item,idx)=>/*#__PURE__*/_jsx(\"div\",{children:item},idx));};const formatList=text=>{const values=text===null||text===void 0?void 0:text.split(/[,|]/).map(item=>item.trim()).filter(Boolean);const unique=Array.from(new Set(values));return unique.map((item,idx)=>/*#__PURE__*/_jsx(\"div\",{children:item},idx));};const fetchProduse=async()=>{try{const params=new URLSearchParams();Object.entries(filters).forEach(_ref=>{let[key,value]=_ref;if(value)params.append(key,value);});const res=await fetch('https://backend-pesticide.onrender.com/produse/cautare');if(!res.ok)throw new Error('Error fetching');const data=await res.json();setProduse(data);}catch{setError('Failed to fetch');}};useEffect(()=>{fetchProduse();},[]);const handleFilterChange=e=>{setFilters(prev=>({...prev,[e.target.name]:e.target.value}));};const handleSearch=()=>{fetchProduse();};return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsx(\"img\",{src:\"/logo.png\",alt:\"Rodbun Logo\",className:\"logo\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Identificator Produse Fitosanitare\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"denumire\",placeholder:\"Denumire Comercial\\u0103\",value:filters.denumire,onChange:handleFilterChange}),/*#__PURE__*/_jsx(\"input\",{name:\"substanta\",placeholder:\"Substan\\u021B\\u0103 Activ\\u0103\",value:filters.substanta,onChange:handleFilterChange}),/*#__PURE__*/_jsx(\"input\",{name:\"categorie\",placeholder:\"Categorie Produs\",value:filters.categorie,onChange:handleFilterChange}),/*#__PURE__*/_jsx(\"input\",{name:\"cultura\",placeholder:\"Cultura\",value:filters.cultura,onChange:handleFilterChange}),/*#__PURE__*/_jsx(\"input\",{name:\"daunator\",placeholder:\"D\\u0103un\\u0103tor\",value:filters.daunator,onChange:handleFilterChange}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSearch,children:\"Caut\\u0103\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Denumire Comerciala\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Substan\\u021Be Active\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Categorie Produs\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Culturi Omologate\"}),/*#__PURE__*/_jsx(\"th\",{children:\"D\\u0103un\\u0103tori Omologati\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Doze Omologate\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Disponibil\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:produse.map((p,i)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:p.denumire_produs}),/*#__PURE__*/_jsx(\"td\",{className:\"celula-substante\",children:[p.substanta_activa_1,p.substanta_activa_2,p.substanta_activa_3,p.substanta_activa_4].filter(Boolean).map((s,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"substanta-item\",children:s},i))}),/*#__PURE__*/_jsx(\"td\",{children:p.categorie_produs}),/*#__PURE__*/_jsx(\"td\",{children:formatList(p.culturi_omologate)}),/*#__PURE__*/_jsx(\"td\",{children:formatList(p.daunatori_omologati)}),/*#__PURE__*/_jsx(\"td\",{children:formatList(p.doza_omologata)}),/*#__PURE__*/_jsx(\"td\",{children:p.vandut_de_rodbun})]},i))})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","get","App","produse","setProduse","filters","setFilters","denumire","substanta","categorie","cultura","daunator","error","setError","then","res","data","catch","err","formatDoze","text","values","split","map","item","trim","replace","filter","Boolean","unique","Array","from","Set","idx","children","formatList","fetchProduse","params","URLSearchParams","Object","entries","forEach","_ref","key","value","append","fetch","ok","Error","json","handleFilterChange","e","prev","target","name","handleSearch","className","src","alt","placeholder","onChange","onClick","p","i","denumire_produs","substanta_activa_1","substanta_activa_2","substanta_activa_3","substanta_activa_4","s","categorie_produs","culturi_omologate","daunatori_omologati","doza_omologata","vandut_de_rodbun"],"sources":["C:/D Rodbun/00 New Rodbun/CooAE/COO 2025/x Dezvoltare Aplicatii interne RDB/Aplicatie pesticide/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\naxios.get('https://backend-pesticide.onrender.com/api/products')\n\n\nfunction App() {\n  const [produse, setProduse] = useState([]);\n  const [filters, setFilters] = useState({\n    denumire: '',\n    substanta: '',\n    categorie: '',\n    cultura: '',\n    daunator: '',\n  });\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    axios.get('https://backend-pesticide.onrender.com/api/products')\n      .then((res) => setProduse(res.data))\n      .catch((err) => setError('Eroare la interogare'));\n  }, []);\nconst formatDoze = (text) => {\n  const values = text\n    ?.split('|')                        // Împărțim doar după |\n    .map(item => item.trim().replace(',', '.'))  // Înlocuim virgula cu punct\n    .filter(Boolean);\n\n  const unique = Array.from(new Set(values));\n  return unique.map((item, idx) => <div key={idx}>{item}</div>);\n};\n\nconst formatList = (text) => {\n  const values = text\n    ?.split(/[,|]/)\n    .map(item => item.trim())\n    .filter(Boolean);\n\n  const unique = Array.from(new Set(values));\n  return unique.map((item, idx) => <div key={idx}>{item}</div>);\n};\n\n  const fetchProduse = async () => {\n    try {\n      const params = new URLSearchParams();\n      Object.entries(filters).forEach(([key, value]) => {\n        if (value) params.append(key, value);\n      });\n      const res = await fetch('https://backend-pesticide.onrender.com/produse/cautare');\n      if (!res.ok) throw new Error('Error fetching');\n      const data = await res.json();\n      setProduse(data);\n    } catch {\n      setError('Failed to fetch');\n    }\n  };\n\n  useEffect(() => {\n    fetchProduse();\n  }, []);\n\n  const handleFilterChange = (e) => {\n    setFilters(prev => ({ ...prev, [e.target.name]: e.target.value }));\n  };\n\n  const handleSearch = () => {\n    fetchProduse();\n  };\n\n  return (\n    <div className=\"app\">\n      <header>\n        <img src=\"/logo.png\" alt=\"Rodbun Logo\" className=\"logo\" />\n        <h1>Identificator Produse Fitosanitare</h1>\n      </header>\n      <div className=\"filters\">\n        <input name=\"denumire\" placeholder=\"Denumire Comercială\" value={filters.denumire} onChange={handleFilterChange} />\n        <input name=\"substanta\" placeholder=\"Substanță Activă\" value={filters.substanta} onChange={handleFilterChange} />\n\n        <input name=\"categorie\" placeholder=\"Categorie Produs\" value={filters.categorie} onChange={handleFilterChange} />\n        <input name=\"cultura\" placeholder=\"Cultura\" value={filters.cultura} onChange={handleFilterChange} />\n        <input name=\"daunator\" placeholder=\"Dăunător\" value={filters.daunator} onChange={handleFilterChange} />\n        <button onClick={handleSearch}>Caută</button>\n      </div>\n      {error && <div className=\"error\">{error}</div>}\n      <table>\n        <thead>\n          <tr>\n            <th>Denumire Comerciala</th>\n            <th>Substanțe Active</th>\n            <th>Categorie Produs</th>\n            <th>Culturi Omologate</th>\n            <th>Dăunători Omologati</th>\n\t    <th>Doze Omologate</th>\n\t    <th>Disponibil</th>\n          </tr>\n        </thead>\n        <tbody>\n          {produse.map((p, i) => (\n            <tr key={i}>\n              <td>{p.denumire_produs}</td>\n              <td className=\"celula-substante\">{[p.substanta_activa_1, p.substanta_activa_2, p.substanta_activa_3, p.substanta_activa_4].filter(Boolean) .map((s, i) => (<div key={i} className=\"substanta-item\">{s}</div>))}</td>\n              <td>{p.categorie_produs}</td>\n<td>{formatList(p.culturi_omologate)}</td>\n<td>{formatList(p.daunatori_omologati)}</td>\n<td>{formatList(p.doza_omologata)}</td>\n<td>{p.vandut_de_rodbun}</td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}